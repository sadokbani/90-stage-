

<div style="margin-left: 20%; margin-right: 20%; margin-top: 5%">
  <mat-card>
    <mat-card-content>
      <button routerLink="/commer/promotion" style="margin-left:5px ; float: right"  mat-raised-button><mat-icon>undo</mat-icon></button>
      <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <div fxLayout="column" fxLayoutAlign="space-around">


          <div class="pb-1">
            <mat-form-field style="width: 100%">
              <mat-label>Nom de catégorie</mat-label>
              <mat-select [(value)]="catecorieSelected"
                          formControlName="categorieNom" (valueChange)="refrechSouscategorie_byCategorie()">

                <mat-option *ngFor="let cat of categories" [value]=cat.CategorieNom>
                  {{cat.CategorieNom}}
                </mat-option>

              </mat-select>
              <mat-error *ngIf="form.controls['categorieNom'].hasError('required') " class="mat-text-warn"> vous devez selectionner un catégorie.</mat-error>

            </mat-form-field>

          </div>

          <div class="pb-1">
            <mat-form-field style="width: 100%">
              <mat-label>Nom de sous catégorie</mat-label>
              <mat-select [(value)]="sousCategorieSelected"
                          formControlName="SousCategorieNom" multiple >
                <button mat-button (click)="tous()">Tous</button>
                <button mat-button (click)="None()">None</button>
                <mat-option *ngFor="let cat of sousCategories" [value]=cat.SousCategorieNom>
                  {{cat.SousCategorieNom}}
                </mat-option>

              </mat-select>
              <mat-error *ngIf="form.controls['SousCategorieNom'].hasError('required') " class="mat-text-warn"> vous devez selectionner un sous catégorie.</mat-error>

            </mat-form-field>

          </div>





          <div class="pb-1">
            <mat-form-field style="width: 100%">
              <input matInput placeholder="Nom de promotion" type="text" [formControl]="form.controls['promotionNom']">
              <mat-error *ngIf="form.controls['promotionNom'].hasError('required') && form.controls['promotionNom'].touched" class="mat-text-warn">Vous devez inclure un nom de promotion.</mat-error>
            </mat-form-field>

          </div>

          <div class="pb-1">
            <mat-form-field style="width: 100%">
              <input matInput placeholder="Adresse" type="text" [formControl]="form.controls['adresse']">
              <mat-error *ngIf="form.controls['adresse'].hasError('required') && form.controls['adresse'].touched" class="mat-text-warn">Vous devez inclure une adresse.</mat-error>
            </mat-form-field>

          </div>
          <div class="pb-1">
            <mat-form-field style="width: 100%">
              <mat-label>Points de vente</mat-label>
              <mat-select [(value)]="PTVSelected"
                          formControlName="PTV" multiple >
                <button mat-button (click)="tous_ptv()">Tous</button>
                <button mat-button (click)="None_ptv()">None</button>
                <mat-option *ngFor="let cat of PTV" [value]=cat.Nom>
                  {{cat.Nom}}
                </mat-option>

              </mat-select>
              <mat-error *ngIf="form.controls['PTV'].hasError('required') " class="mat-text-warn"> vous devez selectionner une point de vente</mat-error>

            </mat-form-field>

          </div>

          <div class="pb-1">
            <mat-form-field style="width: 100%">
              <textarea matInput placeholder="Description de promotion" type="text" [formControl]="form.controls['description']"></textarea>
              <mat-error *ngIf="form.controls['description'].hasError('required') && form.controls['description'].touched" class="mat-text-warn">Vous devez inclure une description.</mat-error>
            </mat-form-field>

          </div>

          <div class="pb-1">
            <mat-form-field style="width: 100%">
              <input matInput placeholder="Date Debut" type="datetime-local" [formControl]="form.controls['dateDebut']">
              <mat-error *ngIf="form.controls['dateDebut'].hasError('required') && form.controls['dateDebut'].touched" class="mat-text-warn">Vous devez inclure date et heure de debut de promotion.</mat-error>
            </mat-form-field>

          </div>




          <div class="pb-1">
            <button mat-stroked-button type="button" (click)="filePicker.click()">Selectioner une image</button>
            <input type="file" #filePicker (change)="onImagePicked($event)" multiple>
            <!--<mat-error class="mat-text-warn">You must include confirm image.</mat-error>-->
          </div>
          <div class=" pb-1" >
            <!--<div class="image-preview pb-1" *ngIf="imagePreview !== '' && imagePreview && form.get('image').valid">-->
            <!--<img [src]="imagePreview" [alt]="form.value.title">-->
            <img *ngFor="let url of urls" [src]="url" style="width: 150px;height: 120px; margin: 5px">

          </div>


          <button routerLink="/commer/promotion" style="margin-left:5px ; float: right"  mat-raised-button>Annuler</button>
          <button style="float:right" mat-raised-button class="mat-deep-purple-A200"  type="submit" >Ajouter Promotion</button>
          <br>
        </div>

      </form>
    </mat-card-content>
  </mat-card>
</div>



